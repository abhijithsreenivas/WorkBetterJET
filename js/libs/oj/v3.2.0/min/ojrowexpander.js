/**
 * Copyright (c) 2014, 2017, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojcomponentcore","ojs/ojdatasource-common"],function(a,g){a.Yh=function(a,b){this.sTa=a;this.Id=b};o_("EmptyNodeSet",a.Yh,a);a.Yh.prototype.getParent=function(){return this.sTa};a.f.j("EmptyNodeSet.prototype.getParent",{getParent:a.Yh.prototype.getParent});a.Yh.prototype.getStart=function(){return this.Id};a.f.j("EmptyNodeSet.prototype.getStart",{getStart:a.Yh.prototype.getStart});a.Yh.prototype.getCount=function(){return 0};a.f.j("EmptyNodeSet.prototype.getCount",
{getCount:a.Yh.prototype.getCount});a.Yh.prototype.getData=function(){return null};a.f.j("EmptyNodeSet.prototype.getData",{getData:a.Yh.prototype.getData});a.Yh.prototype.getMetadata=function(){return null};a.f.j("EmptyNodeSet.prototype.getMetadata",{getMetadata:a.Yh.prototype.getMetadata});a.Zh=function(a,b){this.Mc=a;this.Id=b};o_("FlattenedNodeSet",a.Zh,a);a.Zh.prototype.getParent=function(){return this.Mc.getParent()};a.f.j("FlattenedNodeSet.prototype.getParent",{getParent:a.Zh.prototype.getParent});
a.Zh.prototype.getStart=function(){return void 0!=this.Id?this.Id:this.Mc.getStart()};a.f.j("FlattenedNodeSet.prototype.getStart",{getStart:a.Zh.prototype.getStart});a.Zh.prototype.getCount=function(){void 0===this.CR&&(this.CR=this.oda(this.Mc,0),void 0!=this.Id&&(this.CR-=this.Id));return this.CR};a.f.j("FlattenedNodeSet.prototype.getCount",{getCount:a.Zh.prototype.getCount});a.Zh.prototype.oda=function(a,b){var d,e,f,g;d=a.getStart();e=a.getCount();b+=e;if(a.kj)for(f=0;f<e;f++)g=a.kj(f+d),null!=
g&&(b=this.oda(g,b));return b};a.Zh.prototype.getData=function(a){return this.jY(this.Mc,a,{index:this.Mc.getStart()},this.kc)};a.f.j("FlattenedNodeSet.prototype.getData",{getData:a.Zh.prototype.getData});a.Zh.prototype.getMetadata=function(a){return this.jY(this.Mc,a,{index:this.Mc.getStart()},this.sG)};a.f.j("FlattenedNodeSet.prototype.getMetadata",{getMetadata:a.Zh.prototype.getMetadata});a.Zh.prototype.sG=function(a,b){return a.getMetadata(b)};a.Zh.prototype.kc=function(a,b){return a.getData(b)};
a.Zh.prototype.jY=function(a,b,d,e){var f,g,k,l;f=a.getStart();g=a.getCount();for(k=0;k<g;k++){l=d.index;if(l===b)return e.call(this,a,k+f);d.index=l+1;if(a.kj&&(l=a.kj(k+f),null!=l&&(l=this.jY(l,b,d,e),null!=l)))return l}return null};a.rk=function(a,b,d){this.bw=a;this.Q4=b;this.P4=this.aCa(d)};o_("MergedNodeSet",a.rk,a);a.rk.prototype.aCa=function(a){var b,d,e;b=this.bw.getStart();for(d=b+this.bw.getCount();b<d;b++)if(e=this.bw.getMetadata(b).key,a===e)return b;return d-1};a.rk.prototype.getParent=
function(){return this.bw.getParent()};a.f.j("MergedNodeSet.prototype.getParent",{getParent:a.rk.prototype.getParent});a.rk.prototype.getStart=function(){return this.bw.getStart()};a.f.j("MergedNodeSet.prototype.getStart",{getStart:a.rk.prototype.getStart});a.rk.prototype.getCount=function(){return this.bw.getCount()+this.Q4.getCount()};a.f.j("MergedNodeSet.prototype.getCount",{getCount:a.rk.prototype.getCount});a.rk.prototype.getData=function(a){a=this.sea(a);return a.set.getData(a.index)};a.f.j("MergedNodeSet.prototype.getData",
{getData:a.rk.prototype.getData});a.rk.prototype.getMetadata=function(a){a=this.sea(a);return a.set.getMetadata(a.index)};a.f.j("MergedNodeSet.prototype.getMetadata",{getMetadata:a.rk.prototype.getMetadata});a.rk.prototype.sea=function(a){if(a<=this.P4)return{set:this.bw,index:a};var b=this.Q4.getCount();return a>this.P4+b?{set:this.bw,index:a-b}:{set:this.Q4,index:a-(this.P4+1)}};a.ei=function(a,b,d,e){this.Mc=a;this.Kn=b;this.KD=d;this.Ln=e};o_("NodeSetWrapper",a.ei,a);a.ei.prototype.getParent=
function(){return this.Mc.getParent()};a.f.j("NodeSetWrapper.prototype.getParent",{getParent:a.ei.prototype.getParent});a.ei.prototype.getStart=function(){return null!=this.KD?this.KD.start:this.Mc.getStart()};a.f.j("NodeSetWrapper.prototype.getStart",{getStart:a.ei.prototype.getStart});a.ei.prototype.getCount=function(){var a,b;a=this.Mc.getStart();b=this.Mc.getCount();null!=this.KD&&(this.KD.start>a?b=Math.min(0,b-(this.KD.start-a)):this.KD.start<a&&(b=0));return b};a.f.j("NodeSetWrapper.prototype.getCount",
{getCount:a.ei.prototype.getCount});a.ei.prototype.getData=function(a){return this.Mc.getData(a)};a.f.j("NodeSetWrapper.prototype.getData",{getData:a.ei.prototype.getData});a.ei.prototype.getMetadata=function(a){var b;b=this.Mc.getMetadata(a);b.index=a;b.parentKey=this.getParent();this.Kn.call(null,b.key,b);return b};a.f.j("NodeSetWrapper.prototype.getMetadata",{getMetadata:a.ei.prototype.getMetadata});a.ei.prototype.kj=function(c){return null!=this.Ln&&-1!=this.Ln.indexOf(this.Mc.getMetadata(c).key)||
!this.Mc.kj||(c=this.Mc.kj(c),null==c)?null:new a.ei(c,this.Kn,null,this.Ln)};a.f.j("NodeSetWrapper.prototype.getChildNodeSet",{kj:a.ei.prototype.kj});a.Ca=function(c,b){this.ng=c;this.za=b||{};a.Ca.N.constructor.call(this)};o_("FlattenedTreeDataSource",a.Ca,a);a.f.xa(a.Ca,a.Im,"oj.FlattenedTreeDataSource");a.Ca.prototype.Init=function(){var c;a.Ca.N.Init.call(this);this.ng.on("change",this.VFa.bind(this));this.Jn=!1;this.I4=parseInt(this.za.fetchSize,10);isNaN(this.I4)&&(this.I4=25);this.xz=parseInt(this.za.maxCount,
10);isNaN(this.xz)&&(this.xz=500);c=this.za.expanded;Array.isArray(c)?this.zt=c:("all"===c&&(this.Ln=[]),this.zt=[]);this.xt=[]};a.f.j("FlattenedTreeDataSource.prototype.Init",{Init:a.Ca.prototype.Init});a.Ca.prototype.handleEvent=function(c,b){return a.Ca.N.handleEvent.call(this,c,b)};a.f.j("FlattenedTreeDataSource.prototype.handleEvent",{handleEvent:a.Ca.prototype.handleEvent});a.Ca.prototype.Xh=function(){delete this.xt;delete this.zt;delete this.Ln;this.Ct&&delete this.Ct;this.ng.off("change");
this.ng.Xh&&this.ng.Xh()};a.f.j("FlattenedTreeDataSource.prototype.Destroy",{Xh:a.Ca.prototype.Xh});a.Ca.prototype.Bn=function(){return this.I4};a.Ca.prototype.QQ=function(){return this.zt};a.f.j("FlattenedTreeDataSource.prototype.getExpandedKeys",{QQ:a.Ca.prototype.QQ});a.Ca.prototype.TI=function(a){return null!=this.za?this.za[a]:null};a.f.j("FlattenedTreeDataSource.prototype.getOption",{TI:a.Ca.prototype.TI});a.Ca.prototype.getWrappedDataSource=function(){return this.ng};a.f.j("FlattenedTreeDataSource.prototype.getWrappedDataSource",
{getWrappedDataSource:a.Ca.prototype.getWrappedDataSource});a.Ca.prototype.rY=function(a){var b,d;b=this.Bn();d=this.xz;return-1===b?-1===a?d:a:-1===a?Math.min(b,a):b};a.Ca.prototype.Yq=function(a,b){this.Jn=!0;this.NB()?this.UBa(a,b):this.TBa(a,b)};a.Ca.prototype.TBa=function(c,b){var d,e,f,g,k,l;if(c.start>this.Dh()){d=this.FY();if(0>this.Dh()){c.count=Math.min(d,c.count);this.ng.fetchChildren(null,c,{success:function(a){this.Su(a,null,0,c,0,b)}.bind(this),error:function(a){this.Es(a,b)}.bind(this)});
return}if(0<d){e=this.Oda();f=e.parent;g=this.ng.getChildCount(f);k=e.index;l=e.depth;-1===g||k<g-1?(e=this.rY(g),c.start=k+1,c.count=-1===g?Math.min(e,c.count):Math.min(d,Math.min(Math.min(e,c.count),g-c.start)),this.ng.fetchChildren(f,c,{success:function(a){this.Su(a,f,l,c,g,b)}.bind(this),error:function(a){this.Es(a,b)}.bind(this)})):k===g-1?(d=new a.Yh(null,c.start),null!=b&&null!=b.success&&b.success.call(null,d),this.Jn=!1):(d=this.Hca(f,l,b,d),d||(d=new a.Yh(null,c.start),null!=b&&null!=b.success&&
b.success.call(null,d),this.Jn=!1));return}}this.X3(c,b)};a.Ca.prototype.moveOK=function(a,b,d){return this.ng.moveOK(a,b,d)};a.f.j("FlattenedTreeDataSource.prototype.moveOK",{moveOK:a.Ca.prototype.moveOK});a.Ca.prototype.move=function(a,b,d,e){this.ng.move(a,b,d,e)};a.f.j("FlattenedTreeDataSource.prototype.move",{move:a.Ca.prototype.move});a.Ca.prototype.FY=function(){return this.xz-(this.Dh()+1)};a.Ca.prototype.Es=function(a,b){null!=b&&null!=b.error&&b.error.call(null,a);this.Jn=!1};a.Ca.prototype.Su=
function(c,b,d,e,f,g){var k,l;k=[];c=new a.ei(c,this.$I.bind(this),e);this.jKa(c,b,d,k);-1===f&&0===c.getCount()&&null!=b&&0<d?(b=this.Hca(b,d,g))||null!=g&&null!=g.success&&g.success.call(null,c):0===k.length?null!=g&&null!=g.success&&g.success.call(null,c):(l=[],l.push(k),b={},b.callbacks=g,b.nodeSet=c,b.keys=[],this.Wka(l,b));void 0===l&&(this.Jn=!1)};a.Ca.prototype.getChildCount=function(a){return this.ng.getChildCount(a)};a.f.j("FlattenedTreeDataSource.prototype.getChildCount",{getChildCount:a.Ca.prototype.getChildCount});
a.Ca.prototype.Hca=function(a,b,d,e){var f,g,k,l,m,p,t,s,n;void 0===e&&(e=this.FY());this.LHa()&&(f={queueOnly:!0});g=n=this.rY(-1);for(k=this.Dh()-1;0<=k;k--)if(l=this.Jk(k),m=l.depth,m<b&&(a=l.parent,p=this.ng.getChildCount(a),l=l.index,(t=-1===p)||l<p-1)){s={};s.start=l+1;t?(s.count=Math.min(e,Math.max(0,g)),f=void 0):s.count=Math.min(e,Math.min(g,p-s.start));if(0==s.count)break;this.ng.fetchChildren(a,s,{success:function(b){this.Su(b,a,m,s,p,d)}.bind(this),error:function(a){this.Es(a,d)}.bind(this)},
f);b=m;g=Math.max(0,g-s.count);if(t||0===m||0===g)break}void 0!=f&&this.ng.fetchChildren(a,{start:s.count,count:0},{success:function(b){this.Su(b,a,m,s,p,d)}.bind(this),error:function(a){this.Es(a,d)}.bind(this)});return g!=n};a.Ca.prototype.jKa=function(a,b,d,e){var f,g,k,l;f=a.getStart();g=a.getCount();for(k=0;k<g;k++)l=a.getMetadata(f+k),l=l.key,this.VL(l,d,f+k,b),this.OG(l)&&e.push(l)};a.Ca.prototype.$I=function(a,b){this.OG(a)&&!b.leaf?b.state="expanded":b.state=b.leaf?"leaf":"collapsed"};a.Ca.prototype.UBa=
function(a,b){var d={maxCount:this.xz};0<=this.Dh()&&(d.start=this.Jk(this.Dh()).key);this.ng.fetchDescendants(null,{success:function(d){this.lFa(d,a,b)}.bind(this),error:function(a){this.Es(a,b)}.bind(this)},d)};a.Ca.prototype.getSortCriteria=function(){return this.ng.getSortCriteria()};a.f.j("FlattenedTreeDataSource.prototype.getSortCriteria",{getSortCriteria:a.Ca.prototype.getSortCriteria});a.Ca.prototype.lFa=function(c,b,d){var e,f,g;b.start>this.Dh()?(e=this.FY(),f=Math.min(e,b.count),c=new a.ei(c,
this.$I.bind(this),null,this.Ln),0<=this.Dh()?(g=this.Oda(),e={index:0,found:!1,count:0},this.j0(c,null,0,g,f,e),f=e.index+1):(e={count:0},this.j0(c,null,0,null,f,e),f=0),null!=d&&null!=d.success&&(c=null!=e?0===e.count?new a.Yh(null,b.start):new a.Zh(c,f):new a.Zh(c),d.success.call(null,c))):this.X3(b,d);this.Jn=!1;this.pia()};a.Ca.prototype.j0=function(a,b,d,e,f,g){var k,l,m,p,t;k=a.getStart();l=a.getCount();for(m=0;m<l&&g.count!=f;m++){p=a.getMetadata(k+m);t=p.key;g.checkDepth&&e.depth===d&&(g.found=
!0,g.checkDepth=!1);if(null==e||g.found)this.VL(t,d,k+m,b),g.count+=1,p.state=p.leaf?"leaf":"expanded";null==e||g.found||(t===e.key?p.leaf||this.OG(t)?g.found=!0:g.checkDepth=!0:g.index+=1);a.kj&&this.OG(t)&&(p=a.kj(m),null!=p&&this.j0(p,t,d+1,e,f,g))}};a.Ca.prototype.expand=function(a){this.uf(a)};a.f.j("FlattenedTreeDataSource.prototype.expand",{expand:a.Ca.prototype.expand});a.Ca.prototype.uf=function(c,b){var d,e,f,g;this.Jn=!0;d=this.ng.getChildCount(c);e=this.rY(d);f=this.xz;if(this.Dh()+1===
f&&(g=this.wm(c),g==f-1)){this.V3(c,new a.Yh(c,0),0,b);return}0==e?this.V3(c,new a.Yh(c,0),0,b):this.ng.fetchChildren(c,{start:0,count:e},{success:function(a){this.V3(c,a,d,b)}.bind(this),error:function(){this.bSa(c)}.bind(this)})};a.Ca.prototype.pia=function(){var a,b;if(this.Ct&&0<this.Ct.length){for(a=this.Ct.length-1;0<=a;a--)b=this.Ct[a],this.collapse(b.key);this.Ct.length=0}};a.Ca.prototype.uKa=function(a){null==this.Ct&&(this.Ct=[]);this.Ct.push({op:"collapse",key:a})};a.Ca.prototype.collapse=
function(a){var b,d,e,f,g;if(this.Jn)this.uKa(a);else if(b=this.wm(a)+1,d=this.Jk(b-1),null!=d){e=0;d=d.depth;f=this.Dh();for(g=b;g<f+1;g++){var k=this.Jk(g).depth;if(k>d)e+=1;else if(k==d)break}if(0!=e){this.NB()?this.Ln.push(a):this.bLa(a);f=[];for(d=0;d<e;d++)f.push({key:this.Jk(b+d).key,index:b+d});this.Qia(b,e);this.tS(f)}this.handleEvent("collapse",{rowKey:a})}};a.f.j("FlattenedTreeDataSource.prototype.collapse",{collapse:a.Ca.prototype.collapse});a.Ca.prototype.OG=function(a){return this.NB()?
this.Ln&&0<this.Ln.length?-1===this.fda(a):!0:this.zt&&0<this.zt.length?-1<this.xda(a):!1};a.Ca.prototype.fda=function(a){return this.Mda(this.Ln,a)};a.Ca.prototype.xda=function(a){return this.Mda(this.zt,a)};a.Ca.prototype.Mda=function(a,b){var d,e;e=-1;for(d=0;d<a.length;d++)a[d]===b&&(e=d);return e};a.Ca.prototype.bLa=function(a){a=this.xda(a);-1<a&&this.zt.splice(a,1)};a.Ca.prototype.WKa=function(a){a=this.fda(a);-1<a&&this.Ln.splice(a,1)};a.Ca.prototype.bSa=function(a){this.handleEvent("expand",
{rowKey:a})};a.Ca.prototype.V3=function(c,b,d,e){var f,g,k,l,m,p,t,s,n,r,q;b=new a.ei(b,this.$I.bind(this));g=f=this.wm(c)+1;k=b.getStart();l=b.getCount();m=this.Jk(f-1);p=m.depth+1;s=[];for(n=k;n<l;n++)k=b.getMetadata(n),t=k.key,this.OG(t)&&s.push(t),this.lga(f,k,m.key,n,p),f++;this.NB()?this.WKa(c):-1===this.zt.indexOf(c)&&this.zt.push(c);void 0!=e&&(r=e.queue,q=e.prevNodeSetInfo);void 0!=q&&(b=new a.rk(q.nodeSet,b,c));if(0!=s.length||void 0!==r&&0!=r.length)void 0===r&&(r=[]),0<s.length&&r.push(s),
void 0===q&&(q={},q.firstIndex=g,q.firstKey=c,q.keys=[]),q.nodeSet=b,q.keys.push(c),this.Wka(r,q);else{if(void 0!=q){e=q.callbacks;if(null!=e){e.success.call(null,b);this.Jn=!1;return}this.nR(q.firstIndex,q.firstKey,b)}else this.nR(g,c,b);b=this.xz;-1===d&&l===this.Bn()||d>l||f==b?this.jX(f):this.Dh()>=b&&this.jX(b);if(void 0!=q)for(d=0;d<q.keys.length;d++)this.handleEvent("expand",{rowKey:q.keys[d]});this.Jn=!1;this.handleEvent("expand",{rowKey:c})}this.Jn=!1;r&&0==r.length&&this.pia()};a.Ca.prototype.Wka=
function(a,b){var d,e;d=a[a.length-1];e=d.shift();0===d.length&&a.pop();this.uf(e,{prevNodeSetInfo:b,queue:a})};a.Ca.prototype.lga=function(a,b,d,e,f){b=b.key;a<=this.Dh()?this.VL(b,f,e,d,a):this.VL(b,f,e,d)};a.Ca.prototype.jX=function(a,b){var d;void 0==b&&(b=this.Dh()+1-a);d=[];for(var e=0;e<b;e++)d.push({key:this.Jk(a+e).key,index:a+e});this.Qia(a,b);this.tS(d)};a.Ca.prototype.VFa=function(a){var b,d,e;b=a.operation;d=a.parent;d=Array.isArray(d)?d[d.length-1]:d;e=a.index;"insert"===b?this.DFa(d,
e,a.data):"delete"===b?this.XEa(d,e):"refresh"===b&&this.kGa(d)};a.Ca.prototype.DFa=function(a,b,d){var e,f;e=this.wm(a);f=this.Jk(e).depth+1;e=e+b+1;d=d.getMetadata(d.getStart());this.lga(e,d,a,b,f)};a.Ca.prototype.XEa=function(c,b){var d,e,f,g,k;d=this.wm(c);e=this.Jk(d);d+=b;f=this.Jk(d);a.A.assert(f.parent===e&&f.depth===e.depth+1);e=d+1;for(g=this.Dh();e<=g;){k=this.Jk(e);if(k.depth!=f.depth)break;e++}this.jX(d,1)};a.Ca.prototype.kGa=function(a){null==a&&this.refresh()};a.Ca.prototype.NB=function(){var a=
this.ng.getCapability("fetchDescendants");return void 0!=this.Ln&&null!=a&&"disable"!=a};a.Ca.prototype.LHa=function(){return"enable"===this.ng.getCapability("batchFetch")};a.Ca.prototype.refresh=function(){this.Wya()};a.Ca.prototype.wm=function(a){var b,d,e;b=this.Dh();for(d=0;d<=b;d++)if(e=this.Jk(d),e.key==a)return d;return-1};a.Ca.prototype.getKey=function(a){return 0>a||a>this.Dh()?null:this.Jk(a).key};a.Ca.prototype.cRa=function(){return{start:0,end:this.Dh()+1}};a.Ca.prototype.UQa=function(a){var b;
b=[];a=this.wm(a);for(a=this.Mo(a);null!=a;)b.push(a),a=this.wm(a),a=this.Mo(a);return b.reverse()};a.Ca.prototype.X3=function(a,b){null!=b&&null!=b.error&&b.error.call(null);this.Jn=!1};a.Ca.prototype.nR=function(){a.A.Oe()};a.Ca.prototype.tS=function(){a.A.Oe()};a.Ca.prototype.Dh=function(){return this.xt.length-1};a.Ca.prototype.Oda=function(){return this.xt[this.Dh()]};a.Ca.prototype.Jk=function(a){return this.xt[a]};a.Ca.prototype.Mo=function(a){a=this.xt[a];return null!=a?a.parent:null};a.Ca.prototype.VL=
function(a,b,d,e,f){var g={};g.key=a;g.depth=b;g.index=d;g.parent=e;void 0===f?this.xt.push(g):this.xt.splice(f,0,g)};a.Ca.prototype.Qia=function(a,b){this.xt.splice(a,b)};a.Ca.prototype.Wya=function(){this.xt.length=0};a.Ca.prototype.getCapability=function(a){return this.ng.getCapability(a)};a.f.j("FlattenedTreeDataSource.prototype.getCapability",{getCapability:a.Ca.prototype.getCapability});a.ab("oj.ojRowExpander",g.oj.baseComponent,{version:"1.0.0",widgetEventPrefix:"oj",options:{context:null,
expanded:null,expand:null,collapse:null},Tq:{root:"oj-rowexpander",icon:"oj-component-icon",clickable:"oj-clickable-icon-nocontext",expand:"oj-rowexpander-expand-icon",collapse:"oj-rowexpander-collapse-icon",leaf:"oj-rowexpander-leaf-icon",lazyload:"oj-rowexpander-lazyload-icon",toucharea:"oj-rowexpander-touch-area",indent:"oj-rowexpander-indent",iconspacer:"oj-rowexpander-icon-spacer",depth0:"oj-rowexpander-depth-0",depth1:"oj-rowexpander-depth-1",depth2:"oj-rowexpander-depth-2",depth3:"oj-rowexpander-depth-3",
depth4:"oj-rowexpander-depth-4",depth5:"oj-rowexpander-depth-5",depth6:"oj-rowexpander-depth-6",depth7:"oj-rowexpander-depth-7"},QC:{uE:7,ET:53},_ComponentCreate:function(){this._super();this.element.addClass(this.Tq.root);this.Xfa()},Xfa:function(){var c=this,b;b=this.options.context;if(null!=b.component)this.ba="function"===typeof b.component?b.component("instance"):b.component;else if(b.componentElement){var d=b.componentElement,d=g(d).hasClass("oj-component-initnode")?d:g(d).find(".oj-component-initnode")[0];
this.ba=a.Components.nd(d)("instance")}this.ge=b.datasource;this.depth=b.depth;this.nj=b.state;this.Kt=b.key;this.index=b.index;this.iS=b.parentKey;this.qxa();this.nxa();this.BP();"expanded"===this.nj||"collapsed"===this.nj?(g(this.L5).on("touchend",function(a){a.preventDefault();c.SX()}),g(this.L5).on("click",function(a){a.preventDefault();c.SX()}),g(this.element).on("keypress",function(a){var b=a.keyCode||a.which;if(b===g.ui.keyCode.ENTER||b===g.ui.keyCode.SPACE)c.SX(),a.preventDefault(),a.target.focus()}),
this.kR=this.mfa.bind(this),this.ba.element.get(0).addEventListener("keydown",this.kR,!0),this.woa=this.fFa.bind(this),this.roa=this.MEa.bind(this),this.ge.on("expand",this.woa,this),this.ge.on("collapse",this.roa,this),this.jHa()):"leaf"===this.nj&&(this.kR=this.mfa.bind(this),this.ba.element.get(0).addEventListener("keydown",this.kR,!0),g(this.icon).attr("tabindex",-1));this.P3=this.BEa.bind(this);if(this.ba.ki())g(this.ba.element).on("ojBeforeCurrentCell",this.P3);else g(this.ba.element).on("ojbeforecurrentcell",
this.P3)},jHa:function(){var a=this.options.expanded;null!=a?a&&"collapsed"===this.nj?this.uf():a||"expanded"!==this.nj||this.bm():this.options.expanded="collapsed"===this.nj?!1:!0},refresh:function(){this.element.empty();this.Xfa()},_destroy:function(){this.ba.element.get(0).removeEventListener("ojkeydown",this.kR,!0);g(this.ba.element).off("ojbeforecurrentcell",this.P3);this.ge.off("expand",this.woa,this);this.ge.off("collapse",this.roa,this);this.element.removeClass(this.Tq.root);this.element.empty()},
uf:function(){return"collapsed"===this.nj?(this.z_(),this.ge.expand(this.Kt),!0):!1},bm:function(){return"expanded"===this.nj?(this.z_(),this.ge.collapse(this.Kt),!0):!1},_setOption:function(a,b,d){"expanded"!=a||null!=d._context&&!0==d._context.internalSet?(this._super(a,b,d),"context"==a&&null!=d._context&&!0!=d._context.internalSet&&this.refresh()):b?this.uf():this.bm()},qxa:function(){var a,b;b=this.depth-1;if(b<this.QC.uE)this.PV(b);else{for(a=1;a<=b/this.QC.uE;a++)this.PV(this.QC.uE);a=b%this.QC.uE;
a<this.QC.uE&&this.PV(a)}},PV:function(a){a=g(document.createElement("span")).addClass(this.Tq.indent).addClass(this.Tq["depth"+a]);this.element.append(a)},nxa:function(){var a;a=g(document.createElement("div")).addClass(this.Tq.iconspacer);this.L5=g(document.createElement("div")).addClass(this.Tq.toucharea);this.icon=g(document.createElement("a")).attr("href","#").attr("aria-labelledby",this.Nda()).addClass(this.Tq.icon).addClass(this.Tq.clickable);this.element.append(a.append(this.L5.append(this.icon)));
this._focusable({element:this.icon,applyHighlight:!0})},vx:function(a){this.icon.addClass(this.Tq[a])},Gy:function(a){this.icon.removeClass(this.Tq[a])},BP:function(){switch(this.nj){case "leaf":this.Gy("icon");this.Gy("clickable");this.vx("leaf");break;case "collapsed":this.vx("expand");this.cM(!1);break;case "expanded":this.vx("collapse");this.cM(!0);break;case "loading":this.Gy("clickable"),this.vx("lazyload")}},v0:function(){switch(this.nj){case "leaf":this.Gy("leaf");this.vx("icon");this.vx("clickable");
break;case "collapsed":this.Gy("expand");break;case "expanded":this.Gy("collapse");break;case "loading":this.Gy("lazyload"),this.vx("clickable")}},BEa:function(a,b){var d,e;null==b&&(b=a.detail);null!=b.currentCell&&(d="cell"==b.currentCell.type?b.currentCell.keys.row:b.currentCell.key,null!=b.previousValue&&(e="cell"==b.previousCurrentCell.type?b.previousCurrentCell.keys.row:b.previousCurrentCell.key),this.Kt===d&&e!=d&&this.ba.vP&&(d=this.R("accessibleRowDescription",{level:this.depth,num:this.index+
1,total:this.ge.getWrappedDataSource().getChildCount(this.iS)}),e="collapsed"===this.nj?this.R("accessibleStateCollapsed"):"expanded"===this.nj?this.R("accessibleStateExpanded"):"",this.ba.vP({context:d,state:e})))},mfa:function(c){var b,d,e=a.Components.nd(this.ba.element.get(0))("getContextByNode",c.target);if(null!=e&&(b=e.key,null==b&&(b=e.keys.row),this.Kt===b&&(b=c.keyCode||c.which,a.Q.vt(c))))if(b==g.ui.keyCode.RIGHT)this.uf()&&c.preventDefault();else if(b==g.ui.keyCode.LEFT)this.bm()&&c.preventDefault();
else if(c.altKey&&b==this.QC.ET&&this.ba.vP){c=this.ge.UQa(this.Kt);if(null!=c&&0<c.length)for(d=[],b=0;b<c.length;b++)d.push({key:c[b],label:this.R("accessibleLevelDescription",{level:b+1})});c=this.R("accessibleRowDescription",{level:this.depth,num:this.index+1,total:this.ge.getWrappedDataSource().getChildCount(this.iS)});this.ba.vP({context:c,state:"",ancestors:d})}},z_:function(){this.v0();this.nj="loading";this.BP()},fFa:function(a){a=a.rowKey;if(a===this.Kt){this.v0();this.nj="expanded";this.BP();
this.cM(!0);this.zla("expanded");var b=this.options.expanded;if(null==b||null!=b&&!b)this._trigger("expand",null,{rowKey:a}),this.Ala(!0)}},MEa:function(a){a=a.rowKey;if(a===this.Kt){this.v0();this.nj="collapsed";this.BP();this.cM(!1);this.zla("collapsed");var b=this.options.expanded;if(null==b||null!=b&&b)this._trigger("collapse",null,{rowKey:a}),this.Ala(!1)}},Ala:function(a){this._setOption("expanded",a,{changed:!0,_context:{internalSet:!0}})},zla:function(a){var b=this.options.context;b.state=
a;this._setOption("context",b,{changed:!0,_context:{internalSet:!0}})},SX:function(){var a=this.nj;this.z_();"collapsed"===a?this.ge.expand(this.Kt):"expanded"===a&&this.ge.collapse(this.Kt)},cM:function(a){this.icon.attr("aria-expanded",a)},getNodeBySubId:function(a){if(null==a)return this.element?this.element[0]:null;a=a.subId;return"oj-rowexpander-disclosure"!==a&&"oj-rowexpander-icon"!==a||null==this.icon?null:this.icon.get(0)},getSubIdByNode:function(a){return a===this.icon.get(0)?{subId:"oj-rowexpander-disclosure"}:
null},vo:function(){this._super();this.icon.attr("aria-labelledby",this.Nda())},Nda:function(){return this.element.parent().closest("[id]").attr("id")}});a.U.qb("oj-row-expander","baseComponent",{properties:{context:{type:"object"},expanded:{type:"boolean"}},methods:{getNodeBySubId:{},getSubIdByNode:{},refresh:{}},events:{collapse:{},expand:{}},extension:{nb:"ojRowExpander"}});a.U.register("oj-row-expander",{metadata:a.U.getMetadata("oj-row-expander")})});