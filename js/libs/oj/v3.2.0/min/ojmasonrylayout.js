/**
 * Copyright (c) 2014, 2017, Oracle and/or its affiliates.
 * The Universal Permissive License (UPL), Version 1.0
 */
"use strict";
define(["ojs/ojcore","jquery","ojs/ojcomponentcore","ojdnd"],function(a,g){function c(a,d,e,f,g,k){null==c.LV&&(c.LV=c.pCa());this.Rd=a;this.si=d;this.gya=e;f&&f.Mra&&(this.$Na=f.Mra);g&&(g.Pra&&(this.N1=g.Pra),g.Ora&&(this.M1=g.Ora),g.Tra&&(this.S1=g.Tra),g.Sra&&(this.R1=g.Sra),g.Qra&&(this.P1=g.Qra),g.Rra&&(this.QP=g.Rra),g.Vra&&(this.U1=g.Vra),g.Wra&&(this.V1=g.Wra),g.Ura&&(this.T1=g.Ura));k&&(k.yI&&(this.Mi=k.yI),k.QJ&&(this.lh=k.QJ),k.coa&&(this.zea=k.coa),k.loa&&(this.eZ=k.loa),k.ura&&(this.qv=
k.ura),k.Moa&&(this.JB=k.Moa),k.npa&&(this.TB=k.npa),k.mpa&&(this.Bq=k.mpa),k.lpa&&(this.dv=k.lpa),k.yra&&(this.bI=k.yra),k.nf&&(this.tC=k.nf),k.og&&(this.uC=k.og),k.Ed&&(this.zo=k.Ed));d=document.createElement("div");e=d.style;e.display="inline-block";e.overflow="hidden";e.visibility="hidden";f=document.createElement("div");e=f.style;e.display="inline-block";d.appendChild(f);a.insertBefore(d,a.firstChild);this.Gka=d;this.Py=f;var l=this;this.vq=function(a){l.$x(a)};this.Mfa=function(){l.TGa()};this.Wx=
function(a){l.DZ(a)};this.Zx=function(a){l.KZ(a)};this.H0=function(){l.pn()}}(function(){function b(a){for(;a;){a=a.nextSibling;var b=!0;if(a){var c=a.style;!c||c.visibility!==t&&c.display!==s||(b=!1)}if(a&&1===a.nodeType&&b)return a}return null}function d(a,b){for(var c=a;c;){var d=c.style;if(d&&(d.visibility===t||d.display===s))break;d=c.parentNode;if(d===b)return c;c=d}return null}function e(a,b){return b.ue<a.ue?1:a.ue<b.ue?-1:0}function f(a){a&&a.sort(e);return a}function h(a){var b=null;a=g(a);
a.hasClass("oj-masonrylayout-tile-1x1")?b={colSpan:1,rowSpan:1}:a.hasClass("oj-masonrylayout-tile-2x1")?b={colSpan:2,rowSpan:1}:a.hasClass("oj-masonrylayout-tile-3x1")?b={colSpan:3,rowSpan:1}:a.hasClass("oj-masonrylayout-tile-1x2")?b={colSpan:1,rowSpan:2}:a.hasClass("oj-masonrylayout-tile-1x3")?b={colSpan:1,rowSpan:3}:a.hasClass("oj-masonrylayout-tile-2x2")?b={colSpan:2,rowSpan:2}:a.hasClass("oj-masonrylayout-tile-2x3")?b={colSpan:2,rowSpan:3}:a.hasClass("oj-masonrylayout-tile-3x2")&&(b={colSpan:3,
rowSpan:2});return b}function k(a){var b=null;a=g(a);a.hasClass("oj-masonrylayout-tile-1x1")?b="oj-masonrylayout-tile-1x1":a.hasClass("oj-masonrylayout-tile-2x1")?b="oj-masonrylayout-tile-2x1":a.hasClass("oj-masonrylayout-tile-3x1")?b="oj-masonrylayout-tile-3x1":a.hasClass("oj-masonrylayout-tile-1x2")?b="oj-masonrylayout-tile-1x2":a.hasClass("oj-masonrylayout-tile-1x3")?b="oj-masonrylayout-tile-1x3":a.hasClass("oj-masonrylayout-tile-2x2")?b="oj-masonrylayout-tile-2x2":a.hasClass("oj-masonrylayout-tile-2x3")?
b="oj-masonrylayout-tile-2x3":a.hasClass("oj-masonrylayout-tile-3x2")&&(b="oj-masonrylayout-tile-3x2");return b}function l(a,b){g(a).removeClass(b)}function m(a,b){g(a).addClass(b)}a.ab("oj.ojMasonryLayout",g.oj.baseComponent,{defaultElement:"\x3cdiv\x3e",widgetEventPrefix:"oj",options:{reorderHandle:null,beforeInsert:null,insert:null,beforeRemove:null,remove:null,beforeResize:null,resize:null,beforeReorder:null,reorder:null},_ComponentCreate:function(){this._super();this.element.addClass("oj-masonrylayout oj-component");
this.options.disabled&&a.C.warn(w);this.Lz=this.eventNamespace+"ReorderHandle";this.Ya={};this.Ya.Bi=!1;this.Ya.Wf=!1;this.Ya.X5=!1;this.Ya.xl=!1;this.Ya.Em=!1;this.Uu();this.nF();this.hb(!0)},refresh:function(){this._super();var a="rtl"===this.sd()!==this.Pi;a&&this.Xba();this.hb(a)},Vp:function(){this._super();this.xf?this.hb(this.xf[0]):this.Gh.Cp(!0)},vo:function(){this._super();this.xf?this.hb(this.xf[0]):this.Gh.Cp(!0)},mi:function(a,b,c){this.ZJa(b);(a=this.Ya.Wf.children().not(".oj-helper-hidden"))&&
0<a.length&&this.oi(b,c,{launcher:g(b.target).closest(":tabbable")})},hb:function(b){if(this.xF()){this.xf=null;this.Pi="rtl"===this.sd();this.uu=a.Q.Re();var d=this.element,e=this.options;if(b){var g=this;this.qv=function(a){g.DNa(a)};this.JB=function(a){g.SGa(a)};this.TB=function(){g.FIa()};this.Bq=function(){g.EIa()};this.dv=function(a){g.DIa(a)};if(!this.Gh){var r={};r.Mra=u;var n={Pra:"oj-masonrylayout-transition-resize-to",Ora:"oj-masonrylayout-transition-resize-to-fast",Tra:"oj-masonrylayout-tile-transition-move-to",
Sra:"oj-masonrylayout-tile-transition-move-to-fast",Qra:"oj-masonrylayout-tile-transition-hide-from",Rra:"oj-masonrylayout-tile-transition-hide-to"};n.Vra=v;n.Wra="oj-masonrylayout-tile-transition-show-to";n.Ura="oj-masonrylayout-tile-transition-resize-to";var q={};q.yI=m;q.QJ=l;q.coa=k;q.loa=h;q.ura=this.qv;q.Moa=this.JB;q.npa=this.TB;q.mpa=this.Bq;q.lpa=this.dv;q.yra=f;q.nf=a.Components.nf;q.og=a.Components.og;q.Ed=function(a){return g.zk(a)};this.aMa();this.Gh=new c(d[0],this.Pi,"enabled"===a.oa.t3(),
r,n,q)}this.ifa=function(a){g.xZ(a)};this.ffa=function(a){g.uZ(a)};this.hfa=function(a){g.wZ(a)};this.gfa=function(a){g.vZ(a)};this.dfa=function(a){g.tZ(a)};this.jfa=function(a){g.yZ(a)};e.reorderHandle&&this.ska()}else e=d.children(),this.C1(e),this.l1(e),this.Uya();this.Gh.Cp(b);b&&(this.Mk=function(){g.fh()},a.Q.al(d[0],this.Mk,E))}else d=!1,this.xf&&(d=this.xf[0]),this.xf=[b||d]},_destroy:function(){this.Bx();var b=this.element;a.Q.ul(b[0],this.Mk);this.Mk=null;this.XLa();for(var c=this.uq(),
d=c.length,e=0;e<d;e++)delete c[e].ue;this.Xba();b.removeClass("oj-masonrylayout oj-component");this.options.reorderHandle&&this.dla();this.XA=this.dv=this.Bq=this.TB=this.JB=this.qv=this.jfa=this.dfa=this.gfa=this.hfa=this.ffa=this.ifa=null;this._super()},_setOption:function(b,c,d){var e=!1;switch(b){case "reorderHandle":this.dla();e=!0;break;case "disabled":a.C.warn(w);break;case "contextMenu":a.Q.Re()||(this.Bx(),c&&this.Uu(c))}this._super(b,c,d);e&&c&&this.ska()},resizeTile:function(a,b){var c=
this.Gh;c.rR()&&c.KQ();var d=g(a),e=d[0],f=k(e);if(b==f)throw Error("JET MasonryLayout: Unable to resize child "+a+" to style class "+b+" because "+b+" is already applied.");!1!==this._trigger("beforeResize",null,{tile:d,previousSizeStyleClass:f,sizeStyleClass:b})&&(this.pF||(this.pF=[]),this.pF.push(e,f,b),c.resizeTile(a,b))},insertTile:function(b,c){var d=this.Gh;d.rR()&&d.KQ();isNaN(c)&&(c=-1);var e=g(b),f=e[0];!1!==this._trigger("beforeInsert",null,{tile:e,index:c})&&(f.cha=c,d.Yj()&&e.addClass(v),
e=f.style,e.top="-1px",this.Pi?e.right="-1px":e.left="-1px",this.Vu(f,c),d.OSa(f,c),a.Components.nf(f),this.XA||(this.XA=[]),this.XA.push(b))},removeTile:function(b){var c=this.Gh;c.rR()&&c.KQ();var d=g(b),e=d[0];if(a.cf.uQ(e)){var f=this.uq(!0),e=f.indexOf(e);0<e&&(this.kX=f[e-1])}!1!==this._trigger("beforeRemove",null,{tile:d})&&c.DSa(b)},fh:function(){this.bq||this.Sfa||this.Gh.yUa()},DNa:function(a){var b=g(a),c=a.cha;delete a.cha;this.options.reorderHandle&&this.l1(b);this.nB.push("insert",{tile:b,
index:c})},SGa:function(b){var c=g(b);this.options.reorderHandle&&this.C1(c);a.Components.og(b);b.parentNode.removeChild(b);this.mP(b);this.nB.push("remove",{tile:c})},FIa:function(){if(this.XA){for(var a=this.Gh,b=this.XA,c=0;c<b.length;c++)a.dVa(b[c]);this.XA=null}if(this.pF){a=this.pF;for(c=0;c<a.length;c+=3){var b=a[c+1],d=a[c+2],b={tile:g(a[c]),previousSizeStyleClass:b,sizeStyleClass:d};this.nB.push("resize",b)}this.pF=null}this.bq&&(this.dM?this.$Ea():this.YV&&this.efa())},EIa:function(){this.Sfa=
!0;this.HO=null;this.nB=[];var b=document.activeElement;b&&a.Q.er(this.element[0],b)&&(this.HO=b)},DIa:function(b){this.Sfa=!1;var c=this.element[0];if(this.HO){var d=this.HO;this.HO=null;if(this.kX){if(d=this.kX,this.kX=null,d&&a.Q.er(c,d)){var c=this.uq(c,!0),e=c.indexOf(d);0<=e&&e<c.length-1?a.cf.p3(c[e+1]):a.cf.p3(d)}}else a.Q.er(c,d)?a.cf.II(d):a.cf.p3(c)}b&&b();if(this.nB)for(b=this.nB,this.nB=null,d=0;d<b.length;d+=2)this._trigger(b[d],null,b[d+1])},Xba:function(){var a=this.Gh;a&&a.destroy();
this.Gh=null},xF:function(){var a=document.createElement("div"),b=a.style;b.width="10px";b.height="10px";b=this.element[0];b.appendChild(a);var c=!1;try{c=0<a.offsetWidth&&0<a.offsetHeight}catch(d){}b.removeChild(a);return c},uq:function(a){for(var b=this.element.children(u),c=b.length,d=[],e=0;e<c;e++){var f=b[e];if(!a||a&&f!==this.fg){var g=f.style;g.visibility!==t&&g.display!==s&&d.push(f)}}return d},aMa:function(){var a=this.uq();if(a)for(var b=0;b<a.length;b++){var c=a[b];c.ue||(c.ue=b+1)}},
Uya:function(){var a=this.uq();if(a)for(var b=0;b<a.length;b++){var c=a[b];c.ue||this.Vu(c,b)}},XLa:function(){var b=this.uq(),c=this.uq();f(c);for(var d=0;d<b.length;d++){var e=b[d],g=c[d];e!=g&&(a.Components.og(g),e.parentNode.insertBefore(g,e),a.Components.nf(g),e=b.indexOf(g),e>d&&(b.splice(e,1),b.splice(d,0,g)))}},Vu:function(a,b){var c=this.uq();0>b&&(b=c.length);if(c)for(var d=0;d<c.length;d++){var e=c[d];e.ue&&e.ue>=b+1&&e.ue++}a.ue=b+1},mP:function(a){if(a.ue){var b=this.uq();if(b)for(var c=
0;c<b.length;c++){var d=b[c];d.ue&&d.ue>a.ue&&d.ue--}delete a.ue}},Uu:function(a){var b=null,c=null;a||this.options.contextMenu||(b=this.element.attr("contextmenu"))&&(this.options.contextMenu="#"+b);if(a||this.options.contextMenu){b=a||this.options.contextMenu;c=g.type(b);if("function"==c){try{b=b()}catch(d){b=null}g.type(b)}if(b){if(b=g(b)){b.css("display",s);c=this.Ya;if(!c)return;c.Wf=b;c.Bi=!0}this.Ya.Bi&&a&&this.nF()}}},nF:function(){if(this.Ya&&this.Ya.Bi&&this.options.reorderHandle){var a=
this.Ya.Wf,b=this;a.on("ojselect",g.proxy(this.hm,this));var c=!1;a.find("[data-oj-command]").each(function(){if(0===g(this).children("a").length){var a=g(this).attr("data-oj-command").slice(17);g(this).replaceWith(b.Ak(a));g(this).addClass("oj-menu-item");c=!0}});c&&a.ojMenu("refresh");this.Ya.X5=a.find("#"+y);this.Ya.xl=a.find("#"+x);this.Ya.Em=a.find("#"+z)}},Bx:function(){var a=this.Ya;a&&a.Bi&&(a.Bi=!1,a.Wf.off("ojselect"),a.Wf=null)},ZJa:function(a){var c=this.element,e=a.originalEvent.target,
f=this.options.reorderHandle;a=!1;f&&(f=g(e).closest(f))&&0<f.length&&(a=!0);c=d(e,c[0]);this.Ya.tile=c;if(this.Ya.Bi){var e=this.Ya.xQ,f=!1,h=this.Ya.X5;if(h){var k=h.hasClass("oj-helper-hidden");a||k?a&&k&&(h.removeClass("oj-helper-hidden"),f=!0):(h.addClass("oj-helper-hidden"),f=!0);var l=h.hasClass(r),k=!1;e&&c===e&&(k=!0);k&&!l?(h.addClass(r),f=!0):!k&&l&&(h.removeClass(r),f=!0)}if(h=this.Ya.xl)k=h.hasClass("oj-helper-hidden"),a||k?a&&k&&(h.removeClass("oj-helper-hidden"),f=!0):(h.addClass("oj-helper-hidden"),
f=!0),l=h.hasClass(r),k=!1,e&&c!==e&&c!==b(e)||(k=!0),k&&!l?(h.addClass(r),f=!0):!k&&l&&(h.removeClass(r),f=!0);if(h=this.Ya.Em)k=h.hasClass("oj-helper-hidden"),a||k?a&&k&&(h.removeClass("oj-helper-hidden"),f=!0):(h.addClass("oj-helper-hidden"),f=!0),a=h.hasClass(r),k=!1,e&&e!==c&&e!==b(c)||(k=!0),k&&!a?(h.addClass(r),f=!0):!k&&a&&(h.removeClass(r),f=!0);f&&this.Ya.Wf.ojMenu("refresh")}},Ak:function(a){var b=A[a];a=H[a];var c=g('\x3ca href\x3d"#"\x3e\x3c/a\x3e');c.text(this.R(a));c.wrap("\x3cli id\x3d"+
b+"\x3e\x3c/li\x3e");return c.parent()},VIa:function(a){a&&(this.Ya.xQ=a)},Aha:function(a,b){if(a&&this.Ya.xQ){var c=this.Ya.xQ;this.Ya.xQ=!1;this.iBa(c,a,b)}},iBa:function(a,c,d){var e=a.ue-1,f=g(a);if(!1!==this._trigger("beforeReorder",null,{tile:f,fromIndex:e})){this.mP(a);var h=c.ue-1;d||h++;var k=this.element[0];d||(c=b(c));this.Vu(a,h);k.insertBefore(a,c);this.Gh.Cp(!0);this._trigger("reorder",null,{tile:f,fromIndex:e,toIndex:h})}},hm:function(a,b){var c=b?b.item.attr("id"):void 0;c===y?this.VIa(this.Ya.tile):
c===x?this.Aha(this.Ya.tile,!0):c===z&&this.Aha(this.Ya.tile,!1)},Iea:function(a){var b=this.uq(!0);f(b);for(var c=b.length,d=0;d<c;d++)if(b[d]===a)return d;return-1},ska:function(){var a=this.element,b=a.children();this.l1(b);a.on("dragstart"+this.Lz,this.ifa).on("dragenter"+this.Lz,this.ffa).on("dragover"+this.Lz,this.hfa).on("dragleave"+this.Lz,this.gfa).on("dragend"+this.Lz,this.dfa).on("drop"+this.Lz,this.jfa)},l1:function(a){var b=this.options;a.filter(b.reorderHandle).attr(n,"true").addClass(q);
a.find(b.reorderHandle).attr(n,"true").addClass(q)},dla:function(){var a=this.element,b=a.children();this.C1(b);a.off(this.Lz)},C1:function(a){var b=this.options;a.filter(b.reorderHandle).removeAttr(n).removeClass(q);a.find(b.reorderHandle).removeAttr(n).removeClass(q)},xZ:function(a){var b=this.options;if(b.reorderHandle){var c=a.originalEvent.target,c=g(c).closest(b.reorderHandle);if(!c||1>c.length)return}b.reorderHandle&&!this.bq&&(c=a.target,b=d(c,this.element[0]))&&(c=this.Iea(b),b.s_=c,c={tile:g(b),
fromIndex:c},!1!==this._trigger("beforeReorder",null,c)&&(a=a.originalEvent,this.xX(b,a.pageX,a.pageY,a.dataTransfer)))},uZ:function(b){if(this.bq){b=b.originalEvent;var c=b.relatedTarget,d=this.element[0],e=!1;c?e=d!=c&&!a.Q.er(d,c):this.nca&&(e=(c=document.elementFromPoint(b.clientX,b.clientY))&&(c==d||a.Q.er(d,c)));e&&((this.nca=!1,this.Du)?this.fg&&(g(this.fg).css("display",""),this.Gh.Cp(!1,!0)):b.dataTransfer.dropEffect="none")}},wZ:function(a){if(!this.bq)return!1;var b=a.originalEvent;b.dataTransfer.dropEffect=
"move";this.qBa(b.pageX,b.clientX,b.clientY);a.preventDefault();return!1},vZ:function(b){if(this.bq){var c=b.originalEvent,d=c.relatedTarget;b=this.element[0];var e=!1;e=d?b!=d&&!a.Q.er(b,d):(c=document.elementFromPoint(c.clientX,c.clientY))&&c!=b&&!a.Q.er(b,c);e&&(this.nca=!0,this.fg&&(g(this.fg).css("display",s),this.Gh.Cp(!1,!0)))}},Jaa:function(){if(this.TM){clearTimeout(this.TM);this.TM=null;var a=this.Du;a&&g(a).removeClass("oj-drag")}},tZ:function(){this.Jaa();if(this.bq&&!this.$V){var b=this.Du;
if(b&&this.fg){var c=this.fg;a.Q.er(this.element[0],b)&&(g(c).css("display",""),this.mP(c),c.parentNode.removeChild(c),g(b).css("display",""),this.Vu(b,b.ue-1),this.Gh.Cp(!1,!0));delete b.s_}this.fg=this.Du=null;this.fM=this.dM=!1;this.wX=null;this.bq=this.YV=!1}},yZ:function(a){if(!this.bq)return!1;var b=this.Gh;b.rR()&&b.KQ();this.Jaa();b=a.originalEvent;this.ABa(this.Du,b.pageX,b.pageY);a.stopPropagation();return!1},xX:function(b,c,d,e){this.bq=!0;this.ZV=this.fM=this.$V=!1;this.Du=b;var f=this.element[0],
h=k(b),l=this.fg=document.createElement("div");l.ue=b.ue;l.className=h+" oj-drop";var h=l.style,m=b.style;h.top=m.top;this.Pi?h.right=m.right:h.left=m.left;h=g(b).offset();f.insertBefore(l,b);this.wX=c={left:c-h.left,top:d-h.top};g(b).addClass("oj-drag");e.effectAllowed="move";e.setData("text/html",b.outerHTML);e.setDragImage(b,c.left,c.top);var r=this;this.TM=setTimeout(function(){r.ZV=!0;m.display=s;g(b).removeClass("oj-drag");r.TM=null;a.Components.yr(b)},0)},qBa:function(a,c,e){this.fM=!0;if(this.ZV&&
!this.dM){var f=this.element[0];c=document.elementFromPoint(c,e);c=d(c,f);e=!1;if(c){var h=g(c),k=this.options.reorderHandle;k&&(e=(e=h.find(k))&&0<e.length)}c&&c!==this.fg&&c!==this.Du&&e&&(h=g(f).offset(),e=b(this.fg),a=a-h.left>=c.offsetLeft+.5*c.offsetWidth,this.mP(this.fg),a&&!this.Pi||!a&&this.Pi?(a=b(c))?(this.Vu(this.fg,a.ue-1),f.insertBefore(this.fg,a)):(this.Vu(this.fg,c.ue),f.appendChild(this.fg)):(this.Vu(this.fg,c.ue-1),f.insertBefore(this.fg,c)),e!==b(this.fg)&&(this.dM=this.Gh.Cp(!1,
!0)))}},$Ea:function(){this.dM=!1},ABa:function(b,c,d){this.$V=!0;var e=this.element[0],f=this.fg;this.fg=null;a.Components.og(b);e.replaceChild(b,f);a.Components.nf(b);b.ue=f.ue;f=b.style;f.display="";a.Components.zr(b);var h=g(e).offset(),k=this.wX;f.top=d-k.top-h.top+p;c=c-k.left-h.left;this.Pi?(f.right=e.offsetWidth-(c+g(b).outerWidth(!0))+p,f.left=""):f.left=c+p;this.wX=null;this.fM?this.YV=this.Gh.Cp(!1,!0):this.efa()},efa:function(){this.ZV=this.fM=this.$V=this.bq=this.YV=!1;var a=this.Du;
this.Du=null;var b=a.s_;delete a.s_;var c=this.Iea(a),a={tile:g(a),fromIndex:b,toIndex:c};this._trigger("reorder",null,a)},zk:function(b){var c=this.element,d=a.Context.getContext(c[0]).ye(),e="MasonryLayout",c=c.attr("id"),e=e+(" (id\x3d'"+c+"')")+(": "+b);return d.Ed({description:e})},getNodeBySubId:function(a){return this._super(a)},getSubIdByNode:function(a){return this._super(a)}});var p="px",t="hidden",s="none",n="draggable",r="oj-disabled",q="oj-draggable",u=".oj-masonrylayout-tile-1x1, .oj-masonrylayout-tile-1x2, .oj-masonrylayout-tile-1x3, .oj-masonrylayout-tile-2x1, .oj-masonrylayout-tile-2x2, .oj-masonrylayout-tile-2x3, .oj-masonrylayout-tile-3x1, .oj-masonrylayout-tile-3x2",
v="oj-masonrylayout-tile-transition-show-from",w="JET MasonryLayout: 'disabled' option not supported",y="ojmasonrylayoutcut",x="ojmasonrylayoutpastebefore",z="ojmasonrylayoutpasteafter",A={cut:y,"paste-before":x,"paste-after":z},H={cut:"labelCut","paste-before":"labelPasteBefore","paste-after":"labelPasteAfter"},E=25})();c.prototype.Cp=function(a,c){var e=!1;a?(e=this.Lf()?!0:!1,this.aja()):(this.zo&&(this.Bk=this.zo("performing layout (setup)")),this.Bq&&this.Bq(),this.W1(c),e=this.Q1());return e};
c.prototype.destroy=function(){this.pn();for(var a=this.Rd,c=this.Ux(),e=0;e<c.length;e++){var f=c[e].style;this.si?f.right="":f.left="";f.top=""}a.removeChild(this.Gka);this.zo=this.uC=this.tC=this.bI=this.dv=this.Bq=this.TB=this.JB=this.qv=this.eZ=this.zea=this.lh=this.Mi=this.Rd=this.fs=this.$p=this.Ym=this.aq=this.Yl=this.H0=this.Zx=this.Wx=this.Mfa=this.vq=this.Py=this.Gka=null};c.prototype.resizeTile=function(a,c){var e=this.Rd.querySelector(a);if(e){this.aq||(this.aq=[]);var f=this.aq;f.push(e);
f.push(c);this.mja=!0;this.vH()}};c.prototype.OSa=function(a,c){var e=this.Ux();this.bI&&this.bI(e);var f=null;0<=c&&c<e.length&&(f=e[c]);this.Rd.insertBefore(a,f);this.vH()};c.prototype.dVa=function(a){if(a=this.Rd.querySelector(a))this.Ym||(this.Ym=[]),this.Ym.push(a),this.t1=!0,this.To!==c.l9&&this.To!==c.uL?this.vH():this.t1=!1};c.prototype.DSa=function(a){if(a=this.Rd.querySelector(a))this.$p||(this.$p=[]),this.$p.push(a),this.Nfa=!0,this.vH()};c.prototype.yUa=function(){this.mja||this.Nfa||
this.t1||(this.zo&&(this.Bk=this.zo("performing layout (resizeNotify)")),this.Bq&&this.Bq(),this.W1(!1),this.Q1())};c.prototype.Yj=function(){if(this.fla)return!1;this.Cya||(this.Wxa=this.gya?!1:c.aIa(c.LV[0],c.LV[1]),this.Cya=!0);return this.Wxa};c.prototype.rR=function(){return null!=this.To||null!=this.Yl&&0<this.Yl.length};c.prototype.KQ=function(){this.fla=!0;this.Os(this.S1);this.Os(this.R1);this.Os(this.P1);this.Os(this.QP);this.Os(this.U1);this.Os(this.V1);this.Os(this.T1);this.lh(this.Py,
this.N1);this.lh(this.Py,this.M1);c.Fg(this.Rd,"transitionend",this.vq);c.Fg(this.Rd,"webkitTransitionEnd",this.vq);for(var a=this.Ux(),d=0;d<a.length;d++){var e=a[d];e.bM&&delete e.bM;c.Fg(e,"transitionend",this.Wx);c.Fg(e,"webkitTransitionEnd",this.Wx);c.Fg(e,"transitionend",this.Zx);c.Fg(e,"webkitTransitionEnd",this.Zx)}this.KB?(clearTimeout(this.KB),this.KB=null,this.DZ(null)):this.rC?(clearTimeout(this.rC),this.rC=null,this.s1()):this.To===c.uL||null!=this.Yl&&0<this.Yl.length?this.$x(null):
this.To===c.m9&&this.KZ(null);this.fla=!1};c.ZCa=function(a){var d=c.hG(a);return{wj:a.offsetWidth+(c.Mj(d.marginLeft)+c.Mj(d.marginRight)),jl:a.offsetHeight+(c.Mj(d.marginTop)+c.Mj(d.marginBottom))}};c.YCa=function(a){a=c.hG(a);return{paddingLeft:c.Mj(a.paddingLeft),paddingRight:c.Mj(a.paddingRight),paddingTop:c.Mj(a.paddingTop),paddingBottom:c.Mj(a.paddingBottom),borderLeftWidth:c.Mj(a.borderLeftWidth),borderRightWidth:c.Mj(a.borderRightWidth),borderTopWidth:c.Mj(a.borderTopWidth),borderBottomWidth:c.Mj(a.borderBottomWidth)}};
c.hG=function(a){var c=a.ownerDocument.defaultView,e=null;return e=c?c.getComputedStyle(a,null):a.currentStyle};c.Mj=function(a){return 0<a.length&&"auto"!=a?(a=parseInt(a,10),isNaN(a)&&(a=0),a):0};c.Li=function(a,c,e){a.addEventListener?a.addEventListener(c,e,!1):a.attachEvent&&a.attachEvent("on"+c,e)};c.Fg=function(a,c,e){a.removeEventListener?a.removeEventListener(c,e,!1):a.detachEvent&&a.detachEvent("on"+c,e)};c.L$=function(a,c){if(a)for(var e=0;e<a.length;e++)if(a[e]==c)return e;return-1};c.aIa=
function(a,c){var e=["gecko",16,"trident",6,"webkit",533.1],f=e.length;if(0==f%2)for(var g=0;g<=f-2;g+=2)if(a==e[g]){if(c>=e[1+g])return!0;break}return!1};c.pCa=function(){var a=c.lm,d=null,e=-1,f=navigator.userAgent.toLowerCase();-1!=f.indexOf("msie")||-1!=f.indexOf("trident")?(d="trident",e=a(f,/trident\/(\d+[.]\d+)/),-1==e&&(e=a(f,/msie (\d+\.\d+);/),-1==e&&(e=a(f,/msie (\d+\.\d+)b;/)),e-=4),null!=document.documentMode&&(e=Math.min(e,document.documentMode-4))):-1!=f.indexOf("applewebkit")?(d="webkit",
e=a(f,/applewebkit\/(\d+([.]\d+)*)/)):-1!=f.indexOf("gecko/")&&(d="gecko",e=a(f,/rv:(\d+[.]\d+)/));return[d,e]};c.lm=function(a,c){var e=a.match(c);return e&&(e=e[1])?parseFloat(e):-1};c.wza=function(a,c){return a.BS>c.BS?1:a.BS<c.BS?-1:a.AS>c.AS?1:a.AS<c.AS?-1:0};c.prototype.vH=function(){this.iO||(this.To?this.n0||(this.n0=!0):(this.zo&&(this.Bk=this.zo("performing layout")),this.iO=setTimeout(this.Mfa,0)))};c.prototype.Ux=function(){for(var a=this.Rd.querySelectorAll(this.$Na),c=[],e=0;e<a.length;e++){var f=
a[e],g=f.style;0<f.offsetWidth&&0<f.offsetHeight&&"hidden"!=g.visibility&&c.push(f)}return c};c.prototype.Q1=function(){var a=this.Yl,d=this.Lf();if(this.aq){var e=this.aq;d||(d=[]);for(var f=0;f<e.length;f+=2){var g=e[f];0>c.L$(d,g)&&d.push(g)}}e=!1;if(!d||1>d.length){if(!a||1>a.length)this.Yl=null,this.$x(null),e=!0}else this.Yl=d;a=null!=d&&0<d.length;this.Yj()||e||this.$x(null);return a};c.prototype.Lf=function(){var a=this.Rd,d=this.Ux();this.bI&&this.bI(d);var e=this.vW=null;this.xu=0;this.Na=
1;this.aC=null;var f=[],g=[],k=[],l=this.si,m=c.YCa(a),p=0,t=[];this.K$=t;for(var s=0;s<d.length;s++){var n=d[s],r=this.eZ(n);(e=n.bM)&&delete n.bM;if(!this.vW){var q=r;e&&(q=document.createElement("div"),q.className=e,q=this.eZ(q));this.vW=this.Dya(n,q)}e=this.vW;this.aC||(this.xu=Math.max(Math.floor((a.offsetWidth-m.paddingLeft-m.paddingRight-m.borderLeftWidth-m.borderRightWidth)/e.wj),1),this.nHa(this.xu,this.Na),p=this.xu);r.colSpan>p&&(p=r.colSpan);r.colSpan>this.xu&&(r.colSpan=this.xu);for(var u=
!1,q=0;q<this.Na;q++){for(var v=0;v<this.xu;v++)if(this.gCa(v,q,r)){var u=n.style,w={top:u.top};l?w.right=u.right:w.left=u.left;g.push(w);this.e0(n,v,q,r,e,m);l&&k.push(v);u=!0;t.push({AS:v,BS:q,tile:n});break}if(u)break;q===this.Na-1&&this.p$()}}e&&(a=this.Py.style,a.width=p*e.wj+"px",a.height=this.Na*e.jl+"px");for(s=0;s<d.length;s++)n=d[s],u=n.style,w=g[s],""!=w.top&&(l&&parseInt(u.right,10)!==parseInt(w.right,10)||!l&&parseInt(u.left,10)!==parseInt(w.left,10)||parseInt(u.top,10)!==parseInt(w.top,
10))&&f.push(n);1>f.length&&(f=null);return f};c.prototype.aja=function(){var a=this.K$;this.K$=null;for(var a=a.sort(c.wza),d=this.Ux(),e=0;e<d.length;e++){var f=d[e],g=a[e].tile;f!=g&&(this.uC(g),f.parentNode.insertBefore(g,f),this.tC(g),f=c.L$(d,g),f>e&&(d.splice(f,1),d.splice(e,0,g)))}};c.prototype.nHa=function(a,c){for(var e=this.aC=[],f=0;f<c;f++){var g=[];e.push(g);for(var k=0;k<a;k++)g[k]=!1}};c.prototype.p$=function(){this.Na++;var a=[];this.aC.push(a);for(var c=0;c<this.xu;c++)a[c]=!1};
c.prototype.gCa=function(a,c,e){var f=e.colSpan;e=e.rowSpan;for(var g=c;g<c+e;g++){g>=this.Na&&this.p$();for(var k=a;k<a+f;k++)if(k>=this.xu||this.aC[g][k])return!1}return!0};c.prototype.e0=function(a,c,e,f,g,k){var l=f.colSpan;f=f.rowSpan;for(var m=this.aC,p=e;p<e+f;p++)for(var t=c;t<c+l;t++)m[p][t]=!0;a=a.style;a.top=k.paddingTop+e*g.jl+"px";this.si?a.right=k.paddingRight+c*g.wj+"px":a.left=k.paddingLeft+c*g.wj+"px"};c.prototype.Dxa=function(a){for(var c=this.Ux(),e=0;e<c.length;e++)this.Mi(c[e],
a)};c.prototype.Os=function(a){for(var c=this.Ux(),e=0;e<c.length;e++)this.lh(c[e],a)};c.prototype.W1=function(a){this.iha||(this.bja=a,this.Yj()&&(this.Dxa(a?this.R1:this.S1),this.Mi(this.Py,a?this.M1:this.N1),c.Li(this.Rd,"transitionend",this.vq),c.Li(this.Rd,"webkitTransitionEnd",this.vq)),this.iha=!0)};c.prototype.$x=function(a){var d=!0;if(this.Yl){var e=this.Yl;if(a){var f=a.target;for(a=0;a<e.length;a++)if(f===e[a]){e=this.Yl=[];break}}else this.Yj()||(e=this.Yl=[]);0<e.length&&(d=!1)}if(d){if(this.aq&&
(d=this.aq,this.aq=null,this.Yj()))for(a=0;a<d.length;a+=2)this.lh(d[a],this.T1);this.bja?(this.Yj()&&(this.Os(this.R1),this.lh(this.Py,this.M1)),this.bja=!1):this.Yj()&&(this.Os(this.S1),this.lh(this.Py,this.N1));this.Yj()&&(c.Fg(this.Rd,"transitionend",this.vq),c.Fg(this.Rd,"webkitTransitionEnd",this.vq));this.t1=this.Nfa=this.mja=this.iha=!1;this.aja();this.TB&&this.TB();if(this.To===c.uL)if(this.Yj()){var g=this;this.rC=setTimeout(function(){g.s1()},0)}else this.s1();else this.To||this.dv&&this.dv(this.H0)}};
c.prototype.Dya=function(a,d){var e=c.ZCa(a);return{wj:e.wj/d.colSpan,jl:e.jl/d.rowSpan}};c.prototype.TGa=function(){this.iO&&(clearTimeout(this.iO),this.iO=null);this.Bq&&this.Bq();this.To=c.l9;if(this.$p&&this.Yj()){for(var a=this.$p,d=0;d<a.length;d++){var e=a[d];c.Li(e,"transitionend",this.Wx);c.Li(e,"webkitTransitionEnd",this.Wx);this.Mi(e,this.P1)}var f=this;this.KB=setTimeout(function(){for(var c=0;c<a.length;c++){var d=a[c];f.lh(d,f.P1);f.Mi(d,f.QP)}},0)}else this.DZ(null)};c.prototype.DZ=
function(a){this.KB&&(clearTimeout(this.KB),this.KB=null);if(a){a.preventDefault();a.stopPropagation();a=a.target;this.lh(a,this.QP);c.Fg(a,"transitionend",this.Wx);c.Fg(a,"webkitTransitionEnd",this.Wx);var d=this.$p;if(d){for(var e=0;e<d.length;e++){var f=d[e];if(f===a){d.splice(e,1);this.fs||(this.fs=[]);var g=this.fs;g.push(a);break}}1>d.length&&(this.$p=null)}}else if(!this.Yj()&&(d=this.$p)){for(e=0;e<d.length;e++)f=d[e],this.fs||(this.fs=[]),g=this.fs,g.push(f);this.$p=null}if(!this.$p){if(this.fs){g=
this.fs;for(e=0;e<g.length;e++)a=g[e],this.Yj()&&this.lh(a,this.QP),d=a.style,this.si?d.right="":d.left="",d.top="",this.JB&&this.JB(a);this.fs=null}this.To=c.uL;this.W1(!1);if(this.aq)for(g=this.aq,e=0;e<g.length;e+=2)a=g[e],d=g[e+1],f=this.zea(a),this.lh(a,f),this.Mi(a,d),this.Yj()&&(this.Mi(a,this.T1),a.bM=f);this.Q1()}};c.prototype.s1=function(){this.rC&&(clearTimeout(this.rC),this.rC=null);this.To=c.m9;if(this.Ym&&this.Yj())for(var a=this.Ym,d=0;d<a.length;d++){var e=a[d];c.Li(e,"transitionend",
this.Zx);c.Li(e,"webkitTransitionEnd",this.Zx);this.Mi(e,this.V1);this.lh(e,this.U1)}else{if(this.Ym)for(a=this.Ym,d=0;d<a.length;d++)e=a[d],this.lh(e,this.U1);this.KZ(null)}};c.prototype.KZ=function(a){if(a){a.preventDefault();a.stopPropagation();a=a.target;this.lh(a,this.V1);c.Fg(a,"transitionend",this.Zx);c.Fg(a,"webkitTransitionEnd",this.Zx);var d=this.Ym;if(d){for(var e=0;e<d.length;e++){var f=d[e];if(f===a){d.splice(e,1);this.qv&&this.qv(a);break}}1>d.length&&(this.Ym=null)}}else if(!this.Yj()&&
(d=this.Ym)){for(e=0;e<d.length;e++)f=d[e],this.qv&&this.qv(f);this.Ym=null}this.Ym||(this.To=null,this.dv&&this.dv(this.H0),this.n0&&(this.n0=!1,this.vH()))};c.prototype.pn=function(){this.Bk&&(this.Bk(),this.Bk=null)};c.l9=1;c.uL=2;c.m9=3;a.U.qb("oj-masonry-layout","baseComponent",{properties:{reorderHandle:{type:"string"}},methods:{insertTile:{},removeTile:{},resizeTile:{}},events:{beforeInsert:{},beforeRemove:{},beforeReorder:{},beforeResize:{},insert:{},remove:{},reorder:{},resize:{}},extension:{nb:"ojMasonryLayout"}});
a.U.register("oj-masonry-layout",{metadata:a.U.getMetadata("oj-masonry-layout")})});